<div class="container">
    <br />
    <div
        *ngIf="
            (apiService.hasJoinedExerciseState$ | async) !== 'joined';
            else joinedTemplate
        "
    >
        <div>
            <div class="form-group">
                <label class="form-label">Public Name:</label>
                <input
                    class="form-control"
                    [(ngModel)]="clientName"
                    type="text"
                    id="publicName"
                />
            </div>
            <div class="form-check">
                <input
                    class="form-check-input"
                    [(ngModel)]="isTrainer"
                    type="checkbox"
                    id="isTrainer"
                />
                <label class="form-check-label"> Be a trainer? </label>
            </div>
            <button
                (click)="createExercise()"
                class="btn btn-primary me-3"
                id="create"
            >
                Create Exercise
            </button>
        </div>
        <br />
        <div>
            <div class="form-group">
                <label class="form-label">Exercise Id:</label>
                <input
                    class="form-control"
                    [(ngModel)]="exerciseId"
                    type="text"
                    id="exerciseId"
                />
            </div>
            <button (click)="joinExercise()" class="btn btn-primary" id="join">
                Join Exercise
            </button>
        </div>
    </div>

    <ng-template #joinedTemplate>
        <div>
            <app-patients-list></app-patients-list>

            <button
                (click)="addPatient()"
                class="btn btn-primary"
                id="addPatient"
            >
                Add Patient
            </button>
            <button
                (click)="addViewport()"
                class="btn btn-primary"
                id="addViewport"
            >
                Add Viewport
            </button>
            <ng-container *ngIf="client?.role === 'trainer'">
                <button class="btn btn-primary" (click)="open(content)">
                    Open Client Overview
                </button>
                <ng-template #content let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">
                            Client Overview
                        </h4>
                        <button
                            type="button"
                            class="close btn"
                            aria-label="Close"
                            (click)="modal.dismiss('Cross click')"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <app-client-overview></app-client-overview>
                    </div>
                </ng-template>
            </ng-container>
        </div>
    </ng-template>
</div>
